---
interface Props {
  title: string;
  excerpt: string;
  date: string;
  href: string;
  image?: string;
  author?: string;
  class?: string;
}

const {
  title,
  excerpt,
  date,
  href,
  image,
  author,
  class: className = "",
} = Astro.props;

const formattedDate = new Date(date).toLocaleDateString("en-US", {
  year: "numeric",
  month: "short",
  day: "numeric",
});
---

<article
  class:list={[
    "bg-[--color-surface] border border-[--color-border] rounded-[--radius-md] overflow-hidden group",
    className
  ]}
>
  {image && (
    <a href={href} class="block aspect-video overflow-hidden bg-[--color-surface-muted]">
      <img
        src={image}
        alt={title}
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
        loading="lazy"
      />
    </a>
  )}

  <div class="p-6">
    <div class="flex items-center gap-2 text-xs text-[--color-text-muted] mb-3">
      <time datetime={date}>{formattedDate}</time>
      {author && (
        <>
          <span>&middot;</span>
          <span>{author}</span>
        </>
      )}
    </div>

    <h3 class="text-lg font-semibold text-[--color-text] mb-2">
      <a href={href} class="hover:text-[--color-accent] transition-colors">
        {title}
      </a>
    </h3>

    <p class="text-sm text-[--color-text-muted] leading-relaxed line-clamp-2">
      {excerpt}
    </p>

    <a
      href={href}
      class="inline-flex items-center gap-1 mt-4 text-sm font-medium text-[--color-accent] hover:text-[--color-accent-hover] transition-colors"
    >
      Read more
      <i class="ph ph-arrow-right" aria-hidden="true"></i>
    </a>
  </div>
</article>
